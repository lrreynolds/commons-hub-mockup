<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Commonshub ‚Äî Dashboard</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>

  <!-- Mobile/desktop nav toggle (optional UI; JS no-ops if absent) -->
  <button class="secondary" id="navToggle" type="button" style="position:fixed; top:14px; left:14px; z-index:50; width:auto;">
    Menu
  </button>

  <div class="wrap">
    <aside class="sidebar">
      <div class="brand">
        <div class="dot"></div>
        <div>
          <b>Commonshub</b>
          <span>Owner dashboard (mock)</span>
        </div>
      </div>

      <nav class="nav" aria-label="Dashboard sections">
        <a class="navItem active" href="#community">
          <div><b>Community</b><br><small>Status + basics</small></div>
          <div>‚óè</div>
        </a>
        <a class="navItem" href="#announcement">
  <div><b>First impression</b><br><small>About + pinned</small></div>
  <div>‚óã</div>
</a>
        <a class="navItem" href="#invites">
          <div><b>Invites</b><br><small>Bring people in</small></div>
          <div>‚óã</div>
        </a>
        <a class="navItem" href="#funding">
          <div><b>Funding</b><br><small>Stripe + support</small></div>
          <div>‚óã</div>
        </a>
        <a class="navItem" href="#metrics">
          <div><b>Overview</b><br><small>Light totals</small></div>
          <div>‚óã</div>
        </a>
      </nav>

      <div class="hint">
        <b>Mock only:</b> This dashboard shows the Commonshub controls for your community
        (hosting, invites, funding, announcements). Conversations happen in Mastodon apps.
      </div>
    </aside>

    <main class="stage">
      <div class="topbar">
        <div class="left">
          <div class="logoMark"></div>
          <div class="meta">
            <b>Commons Dashboard</b>
            <span>Stewardship + funding</span>
          </div>
        </div>
        <div class="chip">Owner view</div>
      </div>

      <div class="content">
        <div class="center">

          <div class="header">
            <div>
              <h2>Your community is live</h2>
              <p>Commonshub hosts your community on Mastodon. You manage announcements, invites, and funding here.</p>
            </div>
            <div class="chip">Status: Live</div>
          </div>

          <!-- SECTION: Community -->
          <section id="community" style="scroll-margin-top:90px;">
            <div class="card">
              <h3>Community</h3>
              <div class="muted">Role: Community owner</div>

              <div class="list" style="margin-top:10px;">
             <div class="item">
  <b>
    Name
    <span class="editBadge">Edit</span>
  </b>
  <div class="muted">The Commons Hub</div>
</div>

<div class="item">
  <b>
    Address
    <span class="editBadge"><b>Fixed</b></span>
  </b>
  <div class="muted">mycommunity.commonshub.social</div>
</div>

                <div class="item">
                  <b>Hosting</b>
                  <div class="muted">Active ¬∑ Managed by Commonshub</div>
                </div>
              </div>

              <div class="footerBar">
                <a class="secondary" href="setup-basics.html">Edit community details</a>
                <a class="primary" href="community.html">
                  View community <span style="font-weight:800; opacity:.85;">(Mastodon)</span>
                </a>
              </div>

              <div class="note">
                <b>Note:</b> Members participate in the native Mastodon experience (web or mobile apps).
                This dashboard is the Commonshub layer.
              </div>
            </div>
          </section>
          <!-- SECTION: Overview (moved up) -->
<section id="metrics" style="margin-top:14px; scroll-margin-top:90px;">
  <div class="card">
    <h3>Overview</h3>
    <div class="muted">A quick snapshot of what‚Äôs set up.</div>

    <div class="list" style="margin-top:12px;">
      <div class="item">
        <b>Members</b>
        <div class="muted">0</div>
      </div>

      <div class="item">
        <b>First impression</b>
        <div class="muted">Not set</div>
      </div>

      <div class="item">
        <b>Invites</b>
        <div class="muted">Not created</div>
      </div>

      <div class="item">
        <b>Funding</b>
        <div class="muted">Not enabled</div>
      </div>
    </div>

    <div class="note" style="margin-top:12px;">
      <b>Next step:</b> Add an About message and a pinned welcome post so your community feels complete before invites.
    </div>

    <div class="footerBar" style="margin-top:12px;">
      <a class="primary" href="#announcement">Finish first impression</a>
      <a class="secondary" href="#invites">Invite members</a>
    </div>
  </div>
</section>

          <!-- SECTION: Community norms -->
<section id="norms" style="margin-top:14px; scroll-margin-top:90px;">
  <div class="card">
    <h3>Community norms</h3>
    <div class="muted">
      New members will be asked to agree to these during signup.
    </div>

    <div class="field" style="margin-top:12px;">
      <label>Norms</label>
      <textarea>
Be kind and treat people with respect.
Disagree thoughtfully ‚Äî critique ideas, not individuals.
Don‚Äôt post spam or automated content.
Respect people‚Äôs privacy and boundaries.
Follow moderator guidance if issues arise.
      </textarea>

      <div class="muted" style="margin-top:6px;">
        Keep this short and friendly. You can expand or refine these later as your community grows.
      </div>
    </div>

    <div class="note" style="margin-top:12px;">
      <b>Why this matters:</b> These norms appear in the ‚ÄúAccept rules‚Äù step before someone creates an account.
    </div>
  </div>
</section>

          <!-- SECTION: Announcement (stub for next step) -->
        <!-- SECTION: Announcement -->
<section id="announcement" style="margin-top:14px; scroll-margin-top:90px;">
  <div class="card">
    <h3>First impression</h3>
    <div class="muted">
      These show up in the Mastodon experience. Keep them short, warm, and specific.
    </div>

    <div class="field" style="margin-top:12px;">
      <label>About message (public)</label>
      <textarea>
Welcome ‚Äî this is the community space for thoughtful conversation and shared learning.
Start with the Local timeline to see what members are discussing.
      </textarea>
      <div class="muted" style="margin-top:6px;">
        Shown on your community‚Äôs public/about page (people see this before they join).
      </div>
    </div>

    <div class="field" style="margin-top:12px;">
      <label>Pinned welcome post (in the feed)</label>
      <textarea>
Welcome üëã

A few simple norms:
‚Ä¢ Be kind and human
‚Ä¢ Disagree thoughtfully
‚Ä¢ No spam

Introduce yourself below:
‚Ä¢ What brought you here?
‚Ä¢ What do you hope to learn or contribute?

Tip: Start with the Local timeline to see what‚Äôs happening in this community.
      </textarea>
      <div class="muted" style="margin-top:6px;">
        Shown at the top of the Local feed after someone joins.
      </div>
    </div>

    <div class="note" style="margin-top:12px;">
      <b>Important:</b> Replies and moderation happen in Mastodon (web or any Mastodon app). Commonshub helps you set the tone and keep funding simple.
    </div>
  </div>
</section>

          <!-- SECTION: Invites (stub) -->
      <!-- SECTION: Invites -->
<section id="invites" style="margin-top:14px; scroll-margin-top:90px;">
  <div class="card">
    <h3>Invite members</h3>
    <div class="muted">
      Share a simple link. New members join through the standard Mastodon signup flow.
    </div>

    <div class="field" style="margin-top:12px;">
      <label>Invite link</label>
      <input
        type="text"
        value="https://mycommunity.commonshub.social/invite/abc123"
        readonly
      />
      <div class="muted" style="margin-top:6px;">
        Anyone with this link can create an account on your community.
      </div>
    </div>

    <div class="footerBar" style="margin-top:12px;">
      <button class="primary" type="button">
        Copy invite link
      </button>
    </div>

    <div class="note" style="margin-top:12px;">
      <b>What members will see:</b><br>
      ‚Ä¢ Your community banner and About message<br>
      ‚Ä¢ Your community norms (accept rules)<br>
      ‚Ä¢ A standard Mastodon account setup flow<br>
      ‚Ä¢ The Local timeline after joining
    </div>

    <div class="note" style="margin-top:10px;">
      <b>Important:</b> Account creation, profiles, and moderation tools live in Mastodon.
      Commonshub gives you a simple on-ramp and handles hosting.
    </div>
  </div>
</section>

<!-- SECTION: Funding -->
<section id="funding" style="margin-top:14px; scroll-margin-top:90px;">
  <div class="card fundingCard">
    <!-- Header row + mock toggle -->
    <div class="toggleRow" style="margin-top:0;">
      <div>
        <b style="font-size:14px;">Funding</b>
        <div class="muted">Let members support the community if they find it valuable.</div>
      </div>

      <!-- Mock toggle: switches between ‚Äúnot enabled‚Äù and ‚Äúenabled‚Äù views -->
      <button class="secondary" id="fundingToggleBtn" type="button" style="width:auto;">
        Show enabled view
      </button>
    </div>

    <!-- ========== Disabled view ========== -->
    <div id="fundingDisabledView">
      <div class="list" style="margin-top:12px;">
        <div class="item">
          <b>Status</b>
          <div class="muted">Not enabled</div>
        </div>

        <div class="item">
          <b>How it appears to members</b>
          <div class="muted">
            Support is shared through pinned posts or announcements ‚Äî never ads or interruptions.
          </div>
        </div>

        <div class="item">
          <b>Support types</b>
          <div class="muted">
            Ongoing, one-time, or goal-based (availability depends on plan).
          </div>
        </div>
      </div>

      <div class="note" style="margin-top:12px;">
        <b>Good to know:</b> Funding is optional. When you‚Äôre ready, connect Stripe ‚Äî members never see Stripe unless you turn funding on.
      </div>

      <div class="footerBar" style="margin-top:12px;">
        <button class="secondary" type="button" disabled style="opacity:.55; cursor:not-allowed;">
          Connect Stripe (coming soon)
        </button>
      </div>
    </div>

    <!-- ========== Enabled view ========== -->
    <div id="fundingEnabledView" style="display:none;">
      <!-- Status summary -->
      <div class="list" style="margin-top:12px;">
        <div class="item">
          <b>Status</b>
          <div class="muted">Enabled ¬∑ Stripe connected</div>
        </div>

        <div class="item">
          <b>Support types</b>
          <div class="muted">
            Monthly support, one-time tips
            <span style="opacity:.7;">(campaigns available on Growth plan)</span>
          </div>
        </div>

        <div class="item">
          <b>How it appears to members</b>
          <div class="muted">
            Support appears as pinned posts or announcements in the Mastodon feed.
          </div>
        </div>
      </div>

      <!-- Funding post editor / live state -->
      <div class="card" style="margin-top:14px; background: var(--card2);">
      <h3 id="fundingPostTitle" style="margin:0 0 6px;">Funding post</h3>
        <div class="muted" style="margin-bottom:10px;">
          Commonshub pins a single support post in your community. It links members to your support page.
        </div>

        <!-- DRAFT (editable) -->
        <div id="fundingPostDraft">
          <div class="field" style="margin-top:0;">
            <label>Post text</label>
            <textarea id="fundingPostText">If this community has been valuable to you, you can support it here:

[Support this community ‚Üí]

Monthly support and one-time tips help cover hosting and keep the commons healthy.</textarea>

            <div class="muted" style="margin-top:6px;">
              The support link is inserted automatically when you activate, so members always land on the correct page.
            </div>
          </div>
        </div>

        <!-- LIVE (after activation) -->
        <div id="fundingPostLive" style="display:none;">
          <div class="item" style="margin-top:10px;">
            <b>Pinned post (what members see)</b>
            <div class="muted" id="fundingPostRendered" style="white-space:pre-wrap; margin-top:6px;"></div>
          </div>

          <div class="field" style="margin-top:12px;">
            <label>Support link (copyable)</label>
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
              <input id="fundingSupportLink" type="text" value="https://mycommunity.commonshub.social/support" readonly />
              <button class="secondary" id="copySupportLinkBtn" type="button" style="width:auto;">
                Copy link
              </button>
            </div>
            <div class="muted" style="margin-top:6px;">
              Use this link anywhere (email, website, etc.). The pinned post also points here.
            </div>
          </div>
        </div>

        <div class="note" style="margin-top:12px;">
          <b>Important:</b> Payments happen outside Mastodon. This post simply links to your Commonshub support page.
        </div>

        <!-- Single action area -->
        <div class="footerBar" style="margin-top:12px;">
          <button class="primary" id="fundingPostActionBtn" type="button">
            Activate funding post (mock)
          </button>

          <!-- Only appears after activation -->
          <a class="secondary" id="viewFundingPostBtn" href="#" style="display:none;">
            View post in Mastodon
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

      

        </div>
      </div>
    </main>
  </div>

  <script src="assets/app.js"></script>
  <script>
    // Optional: highlight active nav item on click (no scrolling logic beyond anchors)
    (() => {
      const items = Array.from(document.querySelectorAll(".nav .navItem"));
      if (!items.length) return;

      items.forEach(a => {
        a.addEventListener("click", () => {
          items.forEach(x => x.classList.remove("active"));
          a.classList.add("active");
        });
      });
    })();
  </script>
  <script>
(() => {
  const btn = document.getElementById("fundingToggleBtn");
  const off = document.getElementById("fundingDisabledView");
  const on = document.getElementById("fundingEnabledView");
  if (!btn || !off || !on) return;

  let enabled = false;

  function render(){
    off.style.display = enabled ? "none" : "block";
    on.style.display = enabled ? "block" : "none";
    btn.textContent = enabled ? "Show disabled view" : "Show enabled view";
  }

  btn.addEventListener("click", () => {
    enabled = !enabled;
    render();
  });

  render();
})();
</script>
  <script>
  (() => {
    const actionBtn = document.getElementById("fundingPostActionBtn");
    const draft = document.getElementById("fundingPostDraft");
    const live = document.getElementById("fundingPostLive");
    const textArea = document.getElementById("fundingPostText");
    const rendered = document.getElementById("fundingPostRendered");
    const linkInput = document.getElementById("fundingSupportLink");
    const copyBtn = document.getElementById("copySupportLinkBtn");
    const viewBtn = document.getElementById("viewFundingPostBtn");

    if (!actionBtn) return;

    // Mock state
    let isLive = false;

    // In real app: canonical support URL + real Mastodon status URL
    const SUPPORT_URL = linkInput?.value || "https://mycommunity.commonshub.social/support";
    const MASTODON_POST_URL = "#"; // keep # for mock

    function activate() {
      isLive = true;

      const raw = (textArea?.value || "").trim();

      // Replace the placeholder line with an explicit URL line
      const withLink = raw.replace(
        "[Support this community ‚Üí]",
        `Support this community ‚Üí ${SUPPORT_URL}`
      );

      if (rendered) rendered.textContent = withLink;

      if (draft) draft.style.display = "none";
      if (live) live.style.display = "block";

      actionBtn.textContent = "Funding post is live";
      actionBtn.disabled = true;
      actionBtn.style.opacity = ".65";
      actionBtn.style.cursor = "default";

      if (viewBtn) {
        viewBtn.style.display = "inline-flex";
        viewBtn.href = MASTODON_POST_URL;
      }
    }

    actionBtn.addEventListener("click", () => {
      if (isLive) return;
      activate();
    });

    if (copyBtn && linkInput) {
      copyBtn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(linkInput.value);
          const old = copyBtn.textContent;
          copyBtn.textContent = "Copied";
          setTimeout(() => (copyBtn.textContent = old), 900);
        } catch {
          linkInput.select();
          document.execCommand("copy");
        }
      });
    }
  })();
</script>
</body>
</html>
